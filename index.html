<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamsioji Tvirtovė - Solo RPG</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Grenze+Gotisch:wght@100..900&family=Orbitron:wght@400..900&family=Share+Tech+Mono&family=Special+Elite&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="crt-overlay"></div>
    <div class="container">
        <h1 class="cyber-glitch" data-text="TAMSIOJI TVIRTOVĖ">TAMSIOJI TVIRTOVĖ</h1>
        
        <!-- Character Stats -->
        <div class="character-sheet">
            <h3 id="playerName"><span class="material-symbols-outlined">history_edu</span></h3>
            <div class="stats">
                <div class="stat" data-tooltip="Gyvybės"><span class="material-symbols-outlined">favorite</span> <span id="hp">15</span>/<span id="maxHp">15</span></div>
                <div class="stat" data-tooltip="Sidabras"><span class="material-symbols-outlined">paid</span> <span id="silver">0</span></div>
                <div class="stat" data-tooltip="Taškai"><span class="material-symbols-outlined">star</span> <span id="points">0</span>/<span id="maxPoints">10</span></div>
                <div class="stat" data-tooltip="Žala"><span class="material-symbols-outlined">flash_on</span> <span id="playerDamage">d4</span></div>
                <div class="stat" data-tooltip="Šarvai"><span class="material-symbols-outlined">shield</span> <span id="playerDefense">0</span></div>
                <div class="stat" data-tooltip="Lygis"><span class="material-symbols-outlined">emoji_events</span> <span id="level">1</span></div>
            </div>
        </div>

        <!-- Game Content -->
        <div class="main-content">
            <div class="game-area">
                <div id="gameText">
                    <p>Sveikas atvykęs į Tamsiąją Tvirtovę, drąsusis Karguntai!</p>
                    <p>Spausk "Pradėti Nuotykį" ir leiskis į pavojingą kelionę...</p>
                </div>
            </div>

            <div class="actions" id="gameActions">
                <button id="startBtn" onclick="startGame()"><span class="material-symbols-outlined">door_open</span> Pradėti Nuotykį</button>
                <button id="exploreBtn" onclick="exploreRoom()" style="display: none;"><span class="material-symbols-outlined">search</span> Tyrinėti<small class="btn-sublabel">Nauja menė</small></button>
                <button id="attackBtn" onclick="attack()" style="display: none;"><span class="material-symbols-outlined">flash_on</span> Pulti<small class="btn-sublabel">Tikslus smūgis</small></button>
                <button id="powerAttackBtn" onclick="powerAttack()" style="display: none;"><span class="material-symbols-outlined">gavel</span> Galingas Smūgis<small class="btn-sublabel">-2 pataikyti · +2 žala</small></button>
                <button id="scavengeBtn" onclick="scavenge()" style="display: none;"><span class="material-symbols-outlined">manage_search</span> Ieškoti<small class="btn-sublabel">Ieškoti lobio</small></button>
                <button id="fleeBtn" onclick="flee()" style="display: none;"><span class="material-symbols-outlined">sprint</span> Bėgti<small class="btn-sublabel">50% šansas pabėgti</small></button>
                <button id="levelUpBtn" onclick="levelUp()" style="display: none;"><span class="material-symbols-outlined">upgrade</span> Kelti Lygį!<small class="btn-sublabel">Kainuoja 10 taškų</small></button>
            </div>
        </div>
        
        <!-- Inventory -->
        <div class="inventory">
            <h4><span class="material-symbols-outlined">backpack</span> Inventorius:</h4>
            <div id="inventory">Tuščia</div>
        </div>

        <!-- Map Modal -->
        <div id="mapModal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <span class="modal-close" onclick="closeMap()">&times;</span>
                <h3>Tvirtovės Žemėlapis</h3>
                <div id="mapGrid" class="map-grid">
                    <!-- Map will be generated here -->
                </div>
            </div>
        </div>

        <!-- Collapsible panels -->
        <div class="side-panels">
            <div class="challenges" id="challenges-panel">
                <h4 class="collapsible-header" onclick="togglePanel('challenges-panel')">
                    <span class="material-symbols-outlined">emoji_events</span> Iššūkiai
                    <span class="collapse-arrow material-symbols-outlined">expand_more</span>
                </h4>
                <div class="collapsible-body" id="challenges">Tuoj...</div>
            </div>

            <div class="log" id="log-panel">
                <h4 class="collapsible-header" onclick="togglePanel('log-panel')">
                    <span class="material-symbols-outlined">menu_book</span> Žurnalas
                    <span class="collapse-arrow material-symbols-outlined">expand_more</span>
                </h4>
                <div class="collapsible-body log-body" id="log"></div>
            </div>
        </div>
        
    </div>

    <!-- Dice Roll Overlay -->
    <div id="dice-overlay" class="dice-overlay" role="status" aria-live="polite">
        <div class="dice-roll-panel">
            <div class="dice-roll-context" id="dice-context"></div>
            <div class="dice-roll-body">
                <div class="dice-faces-row" id="dice-faces-row"></div>
                <div class="dice-vs-wrap" id="dice-vs-wrap">
                    <span class="dice-vs-label">vs</span>
                    <div class="dice-threshold-box"><span id="dice-threshold"></span></div>
                </div>
            </div>
            <div class="dice-detail" id="dice-detail"></div>
            <div class="dice-roll-outcome" id="dice-outcome"></div>
            <div class="dice-tap-hint">Palieski kad tęsti</div>
        </div>
    </div>

    <div id="toast-container"></div>

    <!-- Sound Effects Library - sfxr.js -->
    <script src="https://sfxr.me/riffwave.js"></script>
    <script src="https://sfxr.me/sfxr.js"></script>
    <script src="sounds.js"></script>
    <script src="game-data.js"></script>
    <script src="game.js"></script>
</body>
</html>
